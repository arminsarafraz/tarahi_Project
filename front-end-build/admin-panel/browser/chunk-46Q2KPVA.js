import{a as q,b as p,c as H,d as P,g as A,i as O,j as W,k as z,l as J,m as K}from"./chunk-HX4NRXA6.js";import{Aa as b,Hb as E,Ia as r,Ja as S,Jb as N,L as c,M as g,Ma as y,Qb as D,Rb as G,Tb as T,Z as a,Za as w,_ as d,_a as x,ab as I,ca as h,cb as F,cc as k,db as L,ec as B,fc as R,gc as U,ha as u,hc as V,ic as j,ka as m,lb as _,mb as M,sa as i,ta as t,ua as l,za as C}from"./chunk-IUEAAI5U.js";import"./chunk-4CLCTAJ7.js";var Q=()=>({"minWidth.%":44});function X(n,f){n&1&&(i(0,"div",22),r(1," Username is required and must be at least 3 characters long. "),t())}function Y(n,f){n&1&&(i(0,"div",22),r(1," Password is required and must be at least 6 characters long. "),t())}function Z(n,f){if(n&1&&(i(0,"div",23),r(1),t()),n&2){let s=b();a(),S(s.errorMessage)}}var ce=(()=>{class n{constructor(s,o,e){this.fb=s,this.http=o,this.router=e,this.isSubmitting=!1,this.errorMessage=null}ngOnInit(){this.loginForm=this.fb.group({username:["",[p.required,p.minLength(3)]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){if(this.loginForm.invalid){this.errorMessage="Please enter valid username and password.";return}this.isSubmitting=!0,this.errorMessage=null;let{username:s,password:o}=this.loginForm.value;this.http.post("https://localhost:7121/api/Auth/login",{username:s,password:o}).subscribe({next:v=>{this.router.navigate(["/dashboard"]),this.isSubmitting=!1},error:v=>{this.errorMessage="Invalid username or password. Please try again.",this.isSubmitting=!1},complete:()=>{this.isSubmitting=!1}})}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}static{this.\u0275fac=function(o){return new(o||n)(d(z),d(F),d(_))}}static{this.\u0275cmp=h({type:n,selectors:[["app-login"]],decls:34,vars:7,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],[3,"ngSubmit","formGroup"],[1,"text-body-secondary"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["formControlName","username","autoComplete","username","cFormControl","","placeholder","Username"],["class","text-danger mb-2",4,"ngIf"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["formControlName","password","autoComplete","current-password","cFormControl","","placeholder","Password","type","password"],["xs","6"],["cButton","","color","primary","type","submit",1,"px-4",3,"disabled"],["class","text-danger mt-3",4,"ngIf"],[1,"text-white","bg-primary","py-5",3,"ngStyle"],[1,"text-center"],[2,"margin-top","40px"],["cButton","","color","primary","routerLink","/register",1,"mt-3"],[1,"text-danger","mb-2"],[1,"text-danger","mt-3"]],template:function(o,e){o&1&&(i(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5),C("ngSubmit",function(){return e.onSubmit()}),i(8,"h1"),r(9,"Login"),t(),i(10,"p",6),r(11,"Sign In to your account"),t(),i(12,"c-input-group",7)(13,"span",8),c(),l(14,"svg",9),t(),g(),l(15,"input",10),t(),u(16,X,2,0,"div",11),i(17,"c-input-group",12)(18,"span",8),c(),l(19,"svg",13),t(),g(),l(20,"input",14),t(),u(21,Y,2,0,"div",11),i(22,"c-row")(23,"c-col",15)(24,"button",16),r(25," Login "),t()()(),u(26,Z,2,1,"div",17),t()()(),i(27,"c-card",18)(28,"c-card-body",19)(29,"div",20)(30,"h2"),r(31,"Sign up"),t(),i(32,"button",21),r(33," Register Now! "),t()()()()()()()()()),o&2&&(a(7),m("formGroup",e.loginForm),a(9),m("ngIf",(e.username==null?null:e.username.invalid)&&(e.username==null?null:e.username.touched)),a(5),m("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(3),m("disabled",e.isSubmitting),a(2),m("ngIf",e.errorMessage),a(),m("ngStyle",y(6,Q)))},dependencies:[I,w,x,L,K,A,q,H,P,O,W,J,U,j,V,T,D,G,k,R,E,B,N,M],encapsulation:2})}}return n})();export{ce as LoginComponent};
